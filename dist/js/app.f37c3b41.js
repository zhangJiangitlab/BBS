(function(e){function r(r){for(var o,n,i=r[0],l=r[1],u=r[2],c=0,m=[];c<i.length;c++)n=i[c],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&m.push(a[n][0]),a[n]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);f&&f(r);while(m.length)m.shift()();return s.push.apply(s,u||[]),t()}function t(){for(var e,r=0;r<s.length;r++){for(var t=s[r],o=!0,n=1;n<t.length;n++){var i=t[n];0!==a[i]&&(o=!1)}o&&(s.splice(r--,1),e=l(l.s=t[0]))}return e}var o={},n={app:0},a={app:0},s=[];function i(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-069766bc":"aef9c907","chunk-09e5690f":"a97dfefd","chunk-11af6c76":"7400abef","chunk-32260418":"024bbd68","chunk-ef089f52":"f8adc427"}[e]+".js"}function l(r){if(o[r])return o[r].exports;var t=o[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,l),t.l=!0,t.exports}l.e=function(e){var r=[],t={"chunk-069766bc":1,"chunk-09e5690f":1,"chunk-11af6c76":1,"chunk-32260418":1,"chunk-ef089f52":1};n[e]?r.push(n[e]):0!==n[e]&&t[e]&&r.push(n[e]=new Promise((function(r,t){for(var o="css/"+({}[e]||e)+"."+{"chunk-069766bc":"ebd94237","chunk-09e5690f":"a95ccfe9","chunk-11af6c76":"c52f1a2a","chunk-32260418":"a0c6ae7f","chunk-ef089f52":"1d6d561d"}[e]+".css",a=l.p+o,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var u=s[i],c=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(c===o||c===a))return r()}var m=document.getElementsByTagName("style");for(i=0;i<m.length;i++){u=m[i],c=u.getAttribute("data-href");if(c===o||c===a)return r()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=r,f.onerror=function(r){var o=r&&r.target&&r.target.src||a,s=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=o,delete n[e],f.parentNode.removeChild(f),t(s)},f.href=a;var d=document.getElementsByTagName("head")[0];d.appendChild(f)})).then((function(){n[e]=0})));var o=a[e];if(0!==o)if(o)r.push(o[2]);else{var s=new Promise((function(r,t){o=a[e]=[r,t]}));r.push(o[2]=s);var u,c=document.createElement("script");c.charset="utf-8",c.timeout=120,l.nc&&c.setAttribute("nonce",l.nc),c.src=i(e);var m=new Error;u=function(r){c.onerror=c.onload=null,clearTimeout(f);var t=a[e];if(0!==t){if(t){var o=r&&("load"===r.type?"missing":r.type),n=r&&r.target&&r.target.src;m.message="Loading chunk "+e+" failed.\n("+o+": "+n+")",m.name="ChunkLoadError",m.type=o,m.request=n,t[1](m)}a[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:c})}),12e4);c.onerror=c.onload=u,document.head.appendChild(c)}return Promise.all(r)},l.m=e,l.c=o,l.d=function(e,r,t){l.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,r){if(1&r&&(e=l(e)),8&r)return e;if(4&r&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(l.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)l.d(t,o,function(r){return e[r]}.bind(null,o));return t},l.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(r,"a",r),r},l.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},l.p="/BBS/",l.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=r,u=u.slice();for(var m=0;m<u.length;m++)r(u[m]);var f=c;s.push([0,"chunk-vendors"]),t()})({0:function(e,r,t){e.exports=t("56d7")},1927:function(e,r,t){},"4d79":function(e,r,t){},"56d7":function(e,r,t){"use strict";t.r(r);t("e260"),t("e6cf"),t("cca6"),t("a79d");var o=t("2b0e"),n=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{attrs:{id:"app"}},[e.showHeader?t("v-header",{attrs:{postTag:e.postTag},on:{searchPostTag:e.searchPostTag}}):e._e(),e.isReload?t("router-view",{on:{searchPostTag:e.searchPostTag}}):e._e()],1)},a=[],s=function(){var e=this,r=e.$createElement,o=e._self._c||r;return o("el-row",{staticClass:"header"},[o("el-col",{staticClass:"logo-wrapper",attrs:{xs:4,sm:8}},[o("router-link",{attrs:{to:{name:"homeLink"}}},[o("img",{staticClass:"logo",attrs:{src:t("9d64")}})])],1),o("el-col",{staticClass:"search-wrapper",attrs:{xs:14,sm:8}},[o("el-input",{staticClass:"search",attrs:{type:"text",placeholder:"搜索文章标题、文章内容或文章标签",clearable:""},nativeOn:{keydown:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.searchPost(r)}},model:{value:e.searchVal,callback:function(r){e.searchVal=r},expression:"searchVal"}}),o("el-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:e.searchPost}},[o("i",{staticClass:"el-icon-search"}),o("span",{staticClass:"hidden-xs-only"},[e._v("搜索")])])],1),e.isLogin?o("el-col",{staticClass:"user",attrs:{xs:6,sm:8}},[o("span",{staticClass:"userName hidden-xs-only"},[e._v(e._s(e.userInfo.user_nickName))]),o("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},[o("ul",{staticClass:"popover-content"},[o("li",{on:{click:e.jumpAbout}},[e._v(" 个人中心 ")]),o("li",[o("router-link",{attrs:{to:{name:"editPostLink"}}},[e._v("写文章")])],1)]),o("img",{staticClass:"avatar",attrs:{slot:"reference",src:e.userInfo.user_avatar,alt:"头像"},slot:"reference"})]),o("span",{staticClass:"loginOut",on:{click:e.loginOut}},[e._v("注销")])],1):o("el-col",{staticClass:"user",attrs:{xs:6,sm:8}},[o("el-button",{attrs:{type:"text"},on:{click:function(r){e.loginVisible=!0}}},[e._v("登录")]),o("el-button",{attrs:{type:"text"},on:{click:function(r){e.registerVisible=!0}}},[e._v("注册")])],1),o("v-login",{attrs:{loginVisible:e.loginVisible},on:{changeLoginVisible:e.changeLoginVisible,userIsLogin:e.userIsLogin}}),o("v-register",{attrs:{registerVisible:e.registerVisible},on:{changeRegisterVisible:e.changeRegisterVisible}})],1)},i=[],l=(t("b0c0"),t("96cf"),t("1da1")),u=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"login"},[t("el-dialog",{staticClass:"dialog",attrs:{title:"登录",visible:e.loginVisible,"before-close":e.handleClose},on:{"update:visible":function(r){e.loginVisible=r}}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px","label-position":"top"}},[t("el-form-item",{attrs:{label:"用户名",prop:"name"}},[t("el-input",{model:{value:e.ruleForm.name,callback:function(r){e.$set(e.ruleForm,"name",r)},expression:"ruleForm.name"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.password,callback:function(r){e.$set(e.ruleForm,"password",r)},expression:"ruleForm.password"}})],1),t("el-form-item",{attrs:{label:"验证码",prop:"confirmCode"}},[t("v-canvas",{attrs:{isRefresh:e.isRefresh},on:{nowVal:e.nowVal}}),t("el-input",{nativeOn:{keydown:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.submitForm("ruleForm")}},model:{value:e.ruleForm.confirmCode,callback:function(r){e.$set(e.ruleForm,"confirmCode",r)},expression:"ruleForm.confirmCode"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("提交")]),t("el-button",{on:{click:e.handleClose}},[e._v("取消")])],1)],1)],1)],1)},c=[],m=(t("d3b7"),t("25f0"),function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("canvas",{ref:"canvas",attrs:{width:"250px",height:"100px"},on:{click:e.curCanvas}},[e._v(" 该浏览器不支持canvas ")]),t("a",{staticClass:"refresh",attrs:{href:"javascript:;"},on:{click:e.curCanvas}},[e._v("看不清？点击刷新")])])}),f=[],d=(t("99af"),t("cb29"),{props:{isRefresh:{type:Boolean}},methods:{curCanvas:function(){var e=this.$refs.canvas,r=e.getContext("2d"),t=e.offsetHeight,o=e.offsetWidth;r.clearRect(0,0,o,t),r.fillStyle="rgba(0,0,0,0.7)",r.fillRect(0,0,o,t);for(var n=0;n<200;n++)this.producePoint(r,o,t);for(var a="",s=this.allCharacter(),i=0;i<4;i++)a+=s[this.randomValue(0,61)];for(var l=0;l<a.length;l++){var u=this.randomValue(0,256),c=this.randomValue(0,256),m=this.randomValue(0,256),f=this.randomValue(-30,30),d=this.randomValue(20,30);r.font="3rem sans-serif",r.fillStyle="rgb(".concat(u,",").concat(c,",").concat(m,")"),r.translate(d+50*l,0),r.rotate(Math.PI/180*f),r.fillText(a[l],0,t/2+10),r.rotate(Math.PI/180*-f),r.translate(-(d+50*l),0)}this.$emit("nowVal",a)},randomValue:function(e,r){return Math.floor(Math.random()*(r-e))+e},allCharacter:function(){for(var e=[],r=48;r<58;r++)e.push(String.fromCharCode(r));for(var t=65;t<123;t++)t>=91&&t<=96||e.push(String.fromCharCode(t));return e},producePoint:function(e,r,t){e.beginPath();var o=this.randomValue(5,r-5),n=this.randomValue(5,t-5),a=this.randomValue(2,4),s=this.randomValue(0,256),i=this.randomValue(0,256),l=this.randomValue(0,256);e.arc(o,n,a,0,2*Math.PI),e.fillStyle="rgb(".concat(s,",").concat(i,",").concat(l,")"),e.fill(),e.closePath()}},watch:{isRefresh:function(e){e&&this.curCanvas()}},mounted:function(){this.curCanvas()}}),h=d,p=(t("a9bb"),t("2877")),g=Object(p["a"])(h,m,f,!1,null,"336f772a",null),v=g.exports,b={data:function(){var e=this,r=function(e,r,t){var o=/[`!#$%^&*@,.()_+<>?:"{}\\/;'[\]·！#￥（——）：；“”‘、，|《。》？、【】[\] \u4e00-\u9fa5]/i,n=/\w{3,9}/;return r?o.test(r)?t(new Error("用户名不能有特殊符号或者中文")):n.test(r)?void t():t(new Error("用户名长度必须是3到9个字符，只能包含英文和数字")):t(new Error("用户名不能为空"))},t=function(e,r,t){var o=/[`!#$%^&*()_+<>?:"{}\\/;'[\]·！#￥（——）：；“”‘、，|《。》？、【】[\] \u4e00-\u9fa5]/i,n=/[\w,.@]{3,16}/;return r?o.test(r)?t(new Error("密码不能有特殊符号或者中文")):n.test(r)?void t():t(new Error("密码长度必须是3到16个字符，只能包含英文、数字和特殊字符@,.")):t(new Error("密码不能为空"))},o=function(r,t,o){if(t.toString().toLowerCase()!==e.ruleForm.nowConfirmCode.toString().toLowerCase())return o(new Error("验证码错误"));o()};return{ruleForm:{name:"",password:"",confirmCode:"",nowConfirmCode:""},isRefresh:!1,rules:{name:[{required:!0,validator:r,trigger:"blur"}],password:[{required:!0,validator:t,trigger:"blur"}],confirmCode:[{required:!0,validator:o,trigger:"blur"}]}}},props:{loginVisible:{type:Boolean}},methods:{handleClose:function(){var e=this;this.$confirm("关闭后数据将会清空, 是否继续?","提示",{type:"warning"}).then((function(){e.$emit("changeLoginVisible",!1),e.$refs["ruleForm"].resetFields()})).catch((function(e){return console.log(e)}))},submitForm:function(e){var r=this;this.$refs[e].validate((function(e){e?r.$axios({method:"get",url:"/login",params:{userName:r.ruleForm.name,userPassword:r.ruleForm.password}}).then((function(e){switch(e.data.status){case 0:r.$message.success("登录成功"),r.$refs["ruleForm"].resetFields(),r.$store.commit("setUserInfo",e.data.user_id),r.$emit("userIsLogin"),r.$emit("changeLoginVisible",!1),r.$router.push({name:"homeLink"}).catch((function(){window.location.reload()}));break;case 1:r.$message.error("用户名或密码错误");break;case 2:r.$alert("该账号已被冻结，请添加微信客服：web2020_","提示",{confirmButtonText:"确定",type:"warning"});break}})).catch((function(e){console.log(e)})):r.$message.error("请输入正确信息")}))},nowVal:function(e){this.ruleForm.nowConfirmCode=e}},watch:{loginVisible:function(e){this.isRefresh=e}},components:{vCanvas:v}},w=b,k=(t("6e6f"),Object(p["a"])(w,u,c,!1,null,"64dd1ce9",null)),C=k.exports,y=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"register"},[t("el-dialog",{staticClass:"dialog",attrs:{title:"注册",visible:e.registerVisible,"before-close":e.handleClose},on:{"update:visible":function(r){e.registerVisible=r}}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px","label-position":"top"}},[t("el-form-item",{attrs:{label:"用户名",prop:"name",error:e.errors.errorName}},[t("el-input",{model:{value:e.ruleForm.name,callback:function(r){e.$set(e.ruleForm,"name",r)},expression:"ruleForm.name"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.password,callback:function(r){e.$set(e.ruleForm,"password",r)},expression:"ruleForm.password"}})],1),t("el-form-item",{attrs:{label:"确认密码",prop:"confirmPassword"}},[t("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.confirmPassword,callback:function(r){e.$set(e.ruleForm,"confirmPassword",r)},expression:"ruleForm.confirmPassword"}})],1),t("el-form-item",{attrs:{label:"昵称",prop:"nickName",error:e.errors.errorNickName}},[t("el-input",{model:{value:e.ruleForm.nickName,callback:function(r){e.$set(e.ruleForm,"nickName",r)},expression:"ruleForm.nickName"}})],1),t("el-form-item",{attrs:{label:"性别",prop:"sex"}},[t("el-radio",{attrs:{label:"1"},model:{value:e.ruleForm.sex,callback:function(r){e.$set(e.ruleForm,"sex",r)},expression:"ruleForm.sex"}},[e._v("男")]),t("el-radio",{attrs:{label:"0"},model:{value:e.ruleForm.sex,callback:function(r){e.$set(e.ruleForm,"sex",r)},expression:"ruleForm.sex"}},[e._v("女")])],1),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{model:{value:e.ruleForm.email,callback:function(r){e.$set(e.ruleForm,"email",r)},expression:"ruleForm.email"}})],1),t("el-form-item",{attrs:{label:"出生日期",prop:"birthday"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.ruleForm.birthday,callback:function(r){e.$set(e.ruleForm,"birthday",r)},expression:"ruleForm.birthday"}})],1),t("el-form-item",{attrs:{label:"地址",prop:"address"}},[t("el-cascader",{attrs:{options:e.cities},model:{value:e.ruleForm.address,callback:function(r){e.$set(e.ruleForm,"address",r)},expression:"ruleForm.address"}})],1),t("el-form-item",{attrs:{label:"头像",prop:"avatar"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://localhost:3000/api/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.ruleForm.imageUrl?t("img",{staticClass:"avatar",attrs:{src:e.ruleForm.imageUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t("el-form-item",{attrs:{label:"验证码",prop:"confirmCode"}},[t("v-canvas",{attrs:{isRefresh:e.isRefresh},on:{nowVal:e.nowVal}}),t("el-input",{model:{value:e.ruleForm.confirmCode,callback:function(r){e.$set(e.ruleForm,"confirmCode",r)},expression:"ruleForm.confirmCode"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("提交")]),t("el-button",{on:{click:e.handleClose}},[e._v("取消")])],1)],1)],1)],1)},F=[],$={data:function(){var e=this,r=function(e,r,t){var o=/[`!#$%^&*@,.()_+<>?:"{}\\/;'[\]·！#￥（——）：；“”‘、，|《。》？、【】[\] \u4e00-\u9fa5]/i,n=/\w{3,9}/;return r?o.test(r)?t(new Error("用户名不能有特殊符号或者中文")):n.test(r)?void t():t(new Error("用户名长度必须是3到9个字符，只能包含英文和数字")):t(new Error("用户名不能为空"))},t=function(e,r,t){var o=/[`!#$%^&*()_+<>?:"{}\\/;'[\]·！#￥（——）：；“”‘、，|《。》？、【】[\] \u4e00-\u9fa5]/i,n=/[\w,.@]{3,16}/;return r?o.test(r)?t(new Error("密码不能有特殊符号或者中文")):n.test(r)?void t():t(new Error("密码长度必须是3到16个字符，只能包含英文、数字和特殊字符@,.")):t(new Error("密码不能为空"))},o=function(r,t,o){return t?t!=e.ruleForm.password?o(new Error("两次密码不一致")):void o():o(new Error("密码不能为空"))},n=function(e,r,t){var o=/^([\w-]+)(?:\.([\w-]+))*?@([a-zA-Z0-9]+)(?:\.([a-zA-Z]+))+$/;return r?o.test(r)?void t():t(new Error("邮箱格式错误")):t(new Error("邮箱不能为空"))},a=function(e,r,t){var o=/[`!#$%^&*,.()+<>?:"{}\\/;'[\]·！#￥（——）：；“”‘，|《。》？【】[\]]/i,n=/[a-zA-Z0-9_\u4e00-\u9fa5]{3,9}/;return r?o.test(r)?t(new Error("昵称不能有特殊符号")):n.test(r)?void t():t(new Error("昵称长度必须是3到9个字符，只能包含英文、中文、数字和_@、")):t(new Error("昵称不能为空"))},s=function(e,r,t){if(!r)return t(new Error("生日不能为空"));t()},i=function(e,r,t){if(0===r.length)return t(new Error("地址不能为空"));t()},l=function(r,t,o){if(!e.ruleForm.imageUrl)return o(new Error("头像不能为空"));o()},u=function(r,t,o){if(t.toString().toLowerCase()!==e.ruleForm.nowConfirmCode.toString().toLowerCase())return o(new Error("验证码错误"));o()};return{errors:{errorName:"",errorNickName:""},ruleForm:{name:"",password:"",confirmPassword:"",nickName:"",email:"",sex:"1",birthday:"",address:"",imageUrl:"",confirmCode:"",nowConfirmCode:""},cities:[],isRefresh:!1,rules:{name:[{required:!0,validator:r,trigger:"blur"}],password:[{required:!0,validator:t,trigger:"blur"}],confirmPassword:[{required:!0,validator:o,trigger:"blur"}],nickName:[{required:!0,validator:a,trigger:"blur"}],sex:[{required:!0,trigger:"blur"}],email:[{required:!0,validator:n,trigger:"blur"}],birthday:[{required:!0,validator:s,trigger:"blur"}],address:[{required:!0,validator:i,trigger:"change"}],avatar:[{required:!0,validator:l,trigger:"blur"}],confirmCode:[{required:!0,validator:u,trigger:"blur"}]}}},props:{registerVisible:{type:Boolean}},methods:{handleClose:function(){var e=this;this.$confirm("关闭后数据将会清空, 是否继续?","提示",{type:"warning"}).then((function(){e.$emit("changeRegisterVisible",!1),e.$refs["ruleForm"].resetFields(),e.ruleForm.imageUrl=""})).catch((function(e){return console.log(e)}))},init:function(){var e=this;this.$axios({method:"get",url:"/getCities"}).then((function(r){0===r.data.state&&(e.cities=JSON.parse(r.data.cityData[0].cities))})).catch((function(e){console.log(e)}))},submitForm:function(e){var r=this;this.$nextTick((function(){r.$refs[e].validate((function(e){e?(r.errors.errorName="",r.errors.errorNickName="",r.$axios({method:"get",url:"/register",params:{ruleForm:r.ruleForm}}).then((function(e){0===e.data.status?(r.$message.success("注册成功"),r.$refs["ruleForm"].resetFields(),r.ruleForm.imageUrl="",r.$emit("changeRegisterVisible",!1)):1===e.data.status&&(r.$message.error("请输入正确信息"),r.errors.errorName=e.data.errorArr[0],r.errors.errorNickName=e.data.errorArr[1])})).catch((function(){r.$message.error("注册失败")}))):r.$message.error("请输入正确信息")}))}))},handleAvatarSuccess:function(e){0===e.state&&(this.ruleForm.imageUrl=e.imgUrl)},beforeAvatarUpload:function(e){var r="image/jpeg"===e.type,t=e.size/1024/1024<2;return r||this.$message.error("上传头像图片只能是 JPG 格式!"),t||this.$message.error("上传头像图片大小不能超过 2MB!"),r&&t},nowVal:function(e){this.ruleForm.nowConfirmCode=e}},watch:{registerVisible:function(e){this.isRefresh=e}},mounted:function(){this.init()},components:{vCanvas:v}},x=$,V=(t("b02a"),Object(p["a"])(x,y,F,!1,null,"45a4146c",null)),_=V.exports,I={name:"Header",inject:["reload"],props:{postTag:{type:String,required:!0}},data:function(){return{searchVal:"",loginVisible:!1,registerVisible:!1,isLogin:!1,userInfo:{}}},methods:{initData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.initIsLogin();case 2:t=e.$store.getters.getUserInfo,t.userInfo&&e.getUserInfo();case 4:case"end":return r.stop()}}),r)})))()},initIsLogin:function(){var e=this;return this.$axios({method:"get",url:"/userIsLogin"}).then((function(r){0!==r.data.status&&(e.isLogin=!1,window.sessionStorage.removeItem("userInfo"))})).catch((function(e){return console.log(e)}))},searchPostTag:function(){""!==this.postTag&&(this.searchVal=this.postTag,this.searchPost()),"searchLink"===this.$route.name&&(this.searchVal=this.$route.params.content)},changeLoginVisible:function(e){this.loginVisible=e},changeRegisterVisible:function(e){this.registerVisible=e},userIsLogin:function(){this.getUserInfo()},getUserInfo:function(){var e=this,r=this.$store.getters.getUserInfo,t=r.userInfo.user_id,o=r.userInfo.isLogin;this.isLogin=o,this.$axios({method:"get",url:"/getUserInfo",params:{user_id:t}}).then((function(r){0===r.data.state&&(e.userInfo=r.data.userInfo)})).catch((function(e){console.log(e)}))},loginOut:function(){var e=this;this.$axios({method:"get",url:"/loginOut"}).then((function(r){0===r.data.state&&(e.$message.success("注销成功"),window.sessionStorage.removeItem("userInfo"),e.isLogin=!1,e.$router.push({name:"homeLink"}).catch((function(){e.reload()})))})).catch((function(e){console.log(e)}))},jumpAbout:function(){this.$router.push({name:"aboutLink",params:{id:this.userInfo.user_id}}),this.reload()},searchPost:function(){this.searchVal!==this.postTag&&this.$emit("searchPostTag",""),this.$router.push({name:"searchLink",params:{content:this.searchVal}}),this.reload()}},created:function(){var e=this;this.initData(),setTimeout((function(){e.searchPostTag()}),300)},watch:{postTag:function(){""!==this.postTag&&(this.searchVal=this.postTag,this.searchPost())},$route:function(e,r){"searchLink"===r.name&&"homeLink"===e.name&&(this.searchVal="",this.searchPost())}},components:{vLogin:C,vRegister:_}},L=I,P=(t("eecd"),Object(p["a"])(L,s,i,!1,null,"b4320790",null)),E=P.exports,S={data:function(){return{imgSrc:"",isReload:!0,showHeader:!0,postTag:""}},provide:function(){return{reload:this.reload}},methods:{reload:function(){var e=this;this.isReload=!1,this.$nextTick((function(){e.isReload=!0}))},searchPostTag:function(e){this.postTag=e}},watch:{$route:function(e){var r=/^\/admin|^\/admin[\/|\/\S+]/;r.test(e.path)?this.showHeader=!1:this.showHeader=!0}},components:{vHeader:E}},T=S,O=(t("5c0b"),Object(p["a"])(T,n,a,!1,null,null,null)),N=O.exports,U=t("8c4f"),R=function(){return t.e("chunk-ef089f52").then(t.bind(null,"bb51"))},j=function(){return t.e("chunk-09e5690f").then(t.bind(null,"f820"))},A=function(){return t.e("chunk-32260418").then(t.bind(null,"2cea"))},q=function(){return t.e("chunk-11af6c76").then(t.bind(null,"8cdb"))},M=function(){return t.e("chunk-069766bc").then(t.bind(null,"37d3"))};o["default"].use(U["a"]);var B=[{path:"/",name:"homeLink",component:R},{path:"/search/:content",name:"searchLink",component:R},{path:"/about/:id",name:"aboutLink",component:j},{path:"/editPost",name:"editPostLink",component:A},{path:"/post/:post_id",name:"postLink",component:M},{path:"*",name:"errorLink",component:q}],H=new U["a"]({mode:"hash",routes:B}),J=U["a"].prototype.push;U["a"].prototype.push=function(e){return J.call(this,e).catch((function(e){return e}))};var D=H,z=t("2f62");function Z(e){if("localStorage"!==e&&"sessionStorage"!==e)throw new Error(" invalid parameter, parameter should be localStorage or sessionStorage");this.storage="localStorage"===e?window.localStorage:window.sessionStorage,this.getItem=function(e){return JSON.parse(this.storage.getItem(e))},this.setItem=function(e,r){return this.storage.setItem(e,JSON.stringify(r))},this.removeItem=function(e){return Object.prototype.hasOwnProperty.call(this.storage,e)?(this.storage.removeItem(e),{state:0,message:"删除成功"}):{state:1,message:"删除失败，没有key值为".concat(e,"字段")}},this.clear=function(){this.storage.clear()}}var G=Z;o["default"].use(z["a"]);var K=new G("sessionStorage"),W=new z["a"].Store({state:{userInfo:K.getItem("userInfo"),adminUsername:K.getItem("adminUsername")},getters:{getUserInfo:function(e){return{userInfo:e.userInfo}},getAdminUsername:function(e){return e.adminUsername}},mutations:{setUserInfo:function(e,r){var t={user_id:r,isLogin:!0};e.userInfo=t,K.setItem("userInfo",t)},setAdminUsername:function(e,r){e.adminUsername=r,K.setItem("adminUsername",r)}},modules:{}}),Q=t("bc3a"),X=t.n(Q),Y=X.a.create({baseURL:"http://localhost:3000/api",withCredentials:!0});o["default"].prototype.$axios=Y;var ee=t("5c96"),re=t.n(ee);t("0fae"),t("e05f"),t("9029");o["default"].use(re.a);t("1927"),t("77ed");o["default"].config.productionTip=!1,new o["default"]({router:D,store:W,render:function(e){return e(N)}}).$mount("#app")},"5c0b":function(e,r,t){"use strict";var o=t("c58b"),n=t.n(o);n.a},"6e6f":function(e,r,t){"use strict";var o=t("4d79"),n=t.n(o);n.a},"7d8e":function(e,r,t){},9029:function(e,r,t){},"9d64":function(e,r,t){e.exports=t.p+"img/logo.1a8fa29e.png"},"9fc2":function(e,r,t){},a9bb:function(e,r,t){"use strict";var o=t("c696"),n=t.n(o);n.a},b02a:function(e,r,t){"use strict";var o=t("9fc2"),n=t.n(o);n.a},c58b:function(e,r,t){},c696:function(e,r,t){},eecd:function(e,r,t){"use strict";var o=t("7d8e"),n=t.n(o);n.a}});
//# sourceMappingURL=app.f37c3b41.js.map